{{ define "main" }}
<div class="container py-5">
    <header>
        <h1>{{ .Title }}</h1>
        <div class="content">
            {{ .Content }}
        </div>
    </header>

    <div class="projects-timeline">
    
    {{ if site.Data.projects }}
        {{ partial "projects-shortcode-generator.html" (dict "context" . "projects" site.Data.projects) }}
        
        {{ $timelineCode := .Scratch.Get "finalTimeline" }}

        {{ $fileContext := dict "context" . "content" $timelineCode "filename" "temp_projects_timeline.md" }}
        {{ partial "data-file-writer.html" $fileContext }}

        {{ $writtenFile := .Scratch.Get "writtenFile" }}
        {{ with $writtenFile }}
            {{ .Content }}
        {{ else }}
            <div class="alert alert-danger" role="alert">
                Error: Could not render timeline content.
            </div>
        {{ end }}

    {{ else }}
        <div class="alert alert-warning" role="alert">
            No public GitHub projects found or the data action has not run yet.
        </div>
    {{ end }}

    </div>
</div>
{{ end }}